<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <title>8th Wall Web: Image Target to SLAM</title>

    <script src="//cdn.8thwall.com/web/aframe/8frame-0.9.0.min.js"></script>
    <script src="//cdn.8thwall.com/web/aframe/aframe-extras-4.2.0.min.js"></script>

    <script src="components.js"></script>

    <!-- XR Extras - provides utilities like load screen, almost there, and error handling.
         See github.com/8thwall/web/xrextras -->
    <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>

    <!-- 8thWall Web - Replace the app key here with your own app key -->
    <script src="//apps.8thwall.com/xrweb?appKey=nH5G0YwR160wpl2MyAZU0RDuLheeAGRBdt2mwsUgwCutnhjcnxjKfZASRBrI2c4AcJQXXV"></script>

    <link href="main.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <div id="shake-tree" style="display: none;">
      <h2>
        Tap to shake tree!
      </h2>
    </div>

    <a-scene
      xrweb
      xrextras-almost-there
      xrextras-loading
      xrextras-runtime-error
    >
      <a-assets>
        <!-- Credit to Poly by Google for the model: https://poly.google.com/view/dA5osnS0Rzj -->
        <a-asset-item
          id="palm-glb"
          src="https://cdn.glitch.com/db06aac1-fd53-4355-a45e-1d6df0f20621%2Ftree-palm.glb"
        ></a-asset-item>
        <a-asset-item
          id="coconut"
          src="https://cdn.glitch.com/db06aac1-fd53-4355-a45e-1d6df0f20621%2Fcoconut-single.glb"
        ></a-asset-item>
      </a-assets>

      <a-camera
        position="0 4 10"
        raycaster="objects: .cantap"
        cursor="fuse: false; rayOrigin: mouse;"
      >
      </a-camera>

      <a-entity physics-image-target="name: duck" visible="false">
        <a-entity
          id="palm"
          gltf-model="#palm-glb"
          class="cantap"
          scale="0.001 0.001 0.001"
          rotation="90 0 0"
          shadow
        ></a-entity>
        <a-entity id="attachment" position="0 0.1 0.8"></a-entity>
      </a-entity>

      <a-entity
        light="type: directional;
             intensity: 0.8;
             castShadow: true;
             shadowMapHeight:2048;
             shadowMapWidth:2048;
             shadowCameraNear: -5;
             shadowCameraRight: 25;
             shadowCameraLeft: -25;
             shadowCameraTop: 25;
             shadowCameraBottom: -25;"
        position="0.5 5 0"
        shadow
      >
      </a-entity>

      <a-light type="ambient" intensity="0.5"></a-light>

      <a-box
        id="floor"
        static-body
        position="0 -0.5 0"
        rotation="-90 0 0"
        height="100"
        width="100"
        shadow
        shadow-material
      ></a-box>
    </a-scene>
  </body>
</html>
